# Contributors Guide

This guide provides an overview of the contribution workflow for the
Digital Twin as a Service (DTaaS) project. Contributors are encouraged
to review the [Code of Conduct](conduct.md) to ensure a respectful and
collaborative community environment.

The following sections outline the contribution process, from opening
an issue to creating a pull request (PR), conducting reviews, and merging
the PR.

## Project Goals

The DTaaS platform aims to facilitate the creation, management, and execution
of Digital Twins (DTs) through a service-oriented architecture that promotes
reusability of DT assets [1]. This documentation assists development team
members in understanding the DTaaS project software design and
development processes.

Additional resources include:

- [Developer Slides](https://odin.cps.digit.au.dk/into-cps/dtaas/assets/20250605_Developer.pdf)
- [Video Presentation](https://odin.cps.digit.au.dk/into-cps/dtaas/assets/videos/20250605_Developer-recorded_web.mp4)
- [Research Paper](https://odin.cps.digit.au.dk/into-cps/dtaas/assets/DTaaS-journal-paper.pdf)

## :computer: Development Environment

A devcontainer configuration is provided in `.devcontainer/devcontainer.json`
for the project. This configuration offers a dockerized development environment
and represents the recommended approach for establishing a consistent
development setup. DevContainer provides the most straightforward method
for initializing the development environment.

<!--
TODO insert when githooks works

### git hooks

The git-hooks will ensure that your commits are formatted
correctly and that the tests pass before you
push the commits to remote repositories.

The project uses pre-commit for managing git hooks. Install git hooks using

```bash
pre-commit install
```

The git hooks run during pre-commit (`git commit`) and
pre-push (`git push`) stages. No special flags and options are
needed to run these git hooks.

You can also run the git-hooks manually before committing or pushing
by using the run commands below. The autoupdate command will set the
revisions of the git repos used in the .pre-commit-config.yaml up to date.

```bash
pre-commit run --hook-stage pre-commit # runs format and syntax checks
pre-commit run --hook-stage pre-push   # runs test
pre-commit autoupdate                  # update hooks to latests versions
```

Be aware that the some tests may take a long time to run.
If you want to skip the tests or formatting,
you can use the `--no-verify` flag
on `git commit` or `git push`. Please use this
option with care.

-->

## :building_construction: Development Workflow

A structured development workflow is employed to manage collaboration
among multiple developers. Each contributor should adhere to the
following procedure:

1. Create a fork of the main repository into a personal GitHub account.
1. Configure
   [Qlty](https://docs.qlty.sh/cloud/quickstart),
   [Codecov](https://docs.codecov.com/docs/quick-start), and
   [SonarQube](https://docs.sonarsource.com/sonarqube-cloud/)
   for the forked repository. Note that Codecov does not require
   a secret token for public repositories.
1. Utilize Node.js 24 and Python 3.12 development environments.
1. Follow the
   [Fork, Branch, PR](https://gun.io/news/2017/01/how-to-github-fork-branch-and-pull-request/)
   workflow methodology.
1. Develop within the fork and create a PR from the working
   branch to the `feature/distributed-demo` branch.
   The PR triggers all GitHub Actions, Qlty, SonarQube, and Codecov checks.
1. Address all issues identified during the automated checks.
1. Upon successful verification, submit a PR to
   the `feature/distributed-demo` branch of the upstream
   [DTaaS repository](https://github.com/INTO-CPS-Association/DTaaS).
1. The PR undergoes review and is merged by either
   project administrators or maintainers.

Each PR should represent a meaningful contribution that satisfies
either a well-defined user story or improves code quality.

## ‚ú® Coding Agents and Editors

The project makes extensive use of coding agents. The primary
usage scenarios include:

üëç Co-development assistance

üëç Code review support

üëç Draft pull requests for prototyping ideas

This project is structured as a monorepo and includes
[copilot instructions](copilot-instructions.md) that inform
GitHub Copilot about the project structure and software
development conventions.

Modern Code IDEs such as VS Code and Cursor provide native integration
with coding agents, requiring no additional configuration for
LLM-driven development workflows. Contributors should disclose
code generated by coding agents, particularly when such code
embeds significant programming logic.

The following practices are strictly prohibited:

üëé Contributing unknown or unreviewed code

üëé Failing to understand the implications of generated code

**Summary**: Contributors must fully understand their contributions
and should not delegate critical thinking to coding agents.

## :eye: Code Quality

Project code quality is assessed through the following mechanisms:

- **Static Analysis**: Linting issues are identified by [Qlty](https://docs.qlty.sh).
  Installation of [Qlty CLI](https://docs.qlty.sh/cli/quickstart) is recommended.
  Execute the command `qlty check --no-fail --sample 5 --no-formatters`
  to identify code quality issues.
  Note that Qlty only analyzes files that differ from
  the default branch (`feature/distributed-demo`).
- **Security Scans**: Code quality and security issues are identified by
  [SonarQube](https://sonarcloud.io/project/overview?id=INTO-CPS-Association_DTaaS).
- **Test Coverage**: Coverage reports are collected by
  [Codecov](https://codecov.io/gh/INTO-CPS-Association/DTaaS).
- **Continuous Integration**: All
  [GitHub Actions](https://github.com/INTO-CPS-Association/DTaaS/actions)
  must complete successfully.

### Qlty

Qlty performs static analysis, linting, and style checks to ensure
optimal code quality for project contributions.

While newly introduced issues appear directly on the PR page,
specific issues can be addressed by visiting the issues or code
section of the Qlty dashboard.

Code contributions should not introduce new quality issues.
If such issues arise, they should be resolved immediately using
the appropriate suggestions from Qlty. In exceptional cases,
an ignore flag may be added, though this approach should be
employed sparingly.

### Codecov

Codecov maintains test coverage metrics for the entire project.
For detailed information about testing practices and workflows,
refer to the [testing documentation](testing/intro.md).

### GitHub Actions

The project defines multiple
[GitHub Actions](https://github.com/INTO-CPS-Association/DTaaS/tree/feature/distributed-demo/.github/workflows).
All pull requests and direct commits must achieve successful
status on all GitHub Actions.

## References

[1] Talasila, Prasad, et al. "Composable digital twins on Digital Twin as
    a Service platform." Simulation 101.3 (2025): 287-311.
